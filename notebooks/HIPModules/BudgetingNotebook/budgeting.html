<!-- HTML for budgeting simulation. -->

<!-- JS imports for sim code and p5.js library. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.dom.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.sound.min.js"></script>

<!-- iframe styling. -->
<style>
    * {
        margin: 0px;
        padding: 0px;
    }
</style>

<!-- JS code for simulation. -->
<script>
    
    // Button object.
    function Button(tx, ty, tw, th, tr, tg, tb, ttext) {
        this.x = tx;
        this.y = ty;
        this.w = tw;
        this.h = th;
        this.r = tr;
        this.g = tg;
        this.b = tb;
        this.text = ttext;
        this.pressed = false;
        this.display = function() {
            if(!this.pressed) {
                fill(this.r, this.g, this.b);
                noStroke();
                rect(this.x, this.y, this.w, this.h, 10);
                if(this.r <= 235 && this.g <= 235 && this.b <= 235) {
                    fill(this.r+20, this.g+20, this.b+20);
                    rect(this.x+2, this.y+2, this.w-3, this.h-3, 10);
                }
            }else {
                fill(130);
                noStroke();
                rect(this.x, this.y, this.w, this.h, 10);
                fill(150);
                rect(this.x+2, this.y+2, this.w-3, this.h-3, 10);
            }
            textFont('Verdana');
            textSize(20);
            fill(0);
            text(this.text, this.x+((this.w-textWidth(this.text))/2), this.y+this.h/2+7);
        };
        this.checkPressed = function() {
            if(mouseX >= this.x && mouseX <= this.x+this.w && mouseY >= this.y && mouseY <= this.y+this.h) {
                return true;
            }
            return false;
        }; 
    }
    
    
    var option1 = new Button(30, 440, 220, 40, 100, 150, 100, 'Option 1');
    var option2 = new Button(290, 440, 220, 40, 100, 150, 100, 'Option 2');
    var option3 = new Button(550, 440, 220, 40, 100, 150, 100, 'Option 3');
    var xy = "(0, 0)";
    var bank = 10000;
    var happiness = 10;
    var months = new Array(12);
    
    function setup() {
        createCanvas(800, 500);
        background(250);
        noStroke();
        month1();
        for(var i=0; i<12; i++) months[i] = false;
    }

    function draw() {
        fill(250);
        rect(0, 425, width, 75);
        option1.display();
        option2.display();
        option3.display();
        
        text(xy, 10, 450);
    }
    
    function mousePressed() {
        if(option1.checkPressed()) option1.pressed = true;
        if(option2.checkPressed()) option2.pressed = true;
        if(option3.checkPressed()) option3.pressed = true;
        
        if(months[0] == false) {
            if(option1.checkPressed()) {
                happiness -= 3;
                bank -= 1000;
            }else if(option2.checkPressed()) {
                happiness -= 1;
                bank -= 1500;
            }else if(option3.checkPressed()) {
                happiness += 2;
                bank -= 2000;
            }
            if(option1.checkPressed() || option2.checkPressed() || option3.checkPressed()) {
                months[0] = true;
                month2((int)(Math.random()*3));
            }
        }
        xy = "("+mouseX+", "+mouseY+")";
    }
    
    function mouseReleased() {
        option1.pressed = false;
        option2.pressed = false;
        option3.pressed = false;
    }
    
    function month1() {
        fill(250);
        rect(0, 0, width, 425);
        textFont('Verdana');
        textSize(20);
        fill(0);
        
        var msg = "You start the month with some savings, and you are planning on moving\ninto a new place. Which place should you rent?\n(Assume all locations are ideal and utilities are included.)";
        var opt1 = "Option 1: Apartment ($2500)";
        var opt2 = "Option 2: Condo ($4000)";
        var opt3 = "Option 3: Suburban Bungalow ($5000)";
        
        text(msg, 15, 35);
        text(opt1, 50, 150);
        text(opt2, 50, 180);
        text(opt3, 50, 210);
    }
    
    function month2(val) {
        fill(250);
        rect(0, 0, width, 425);
        textFont('Verdana');
        textSize(20);
        fill(0);
        var valmsg = "";
        
        if(val == 0) {
            valmsg = "Your house was broken into and $1000 was stolen.";
            bank -= 1000;
        }else if(val == 1) {
            valmsg = "It has been pretty uneventful lately."
        }else if(val == 2) {
            valmsg = "You scored a date! And it went relatively well.";
            happiness += 3;
        }
        
        var msg = "Now that you are settled in and payed off rent for the next few month, you decided to figure out your meal plan. What do you plan on doing?";
        var opt1 = "Option 1: Exclusively eat in every day and buy cheap ingredients. ($500)";
        var opt2 = "Option 2: Eat out sometimes and ";
        var opt3 = "Option 3: Suburban Bungalow ($2000/month)";
        
        text(msg, 15, 35);
        text(opt1, 50, 150);
        text(opt2, 50, 180);
        text(opt3, 50, 210);
    }
</script>